#!/bin/bash

bin_path="`dirname $0`"
root_dir="$( cd $bin_path && cd .. && pwd)"
relative_path=${PWD#$root_dir}
user_uid=1000

# Load project specific variables.
set -o allexport
source "${bin_path}/../.env"
set +o allexport

# In case the user just entered expose without any
# container destination we will set a default one.
if [ "$#" -eq  "0" ]
  then
    container_base_name="php"
  else
    container_base_name=$1
fi

container=$PROJECT_NAME
container+="_$container_base_name"

echo -e "Entering to \e[32m$container\e[0m container"
# @todo allow to the command the --user options to allow enter to the container as root for example.
docker exec -it --privileged --user $user_uid:$user_uid --workdir "/var/www/html$relative_path" $container /bin/bash
