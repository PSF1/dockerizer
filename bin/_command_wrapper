#!/bin/bash

current_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
script_dirname="`dirname $0`"
root_dir="$( cd $script_dirname && cd .. && pwd)"
relative_path=${PWD#$root_dir}

# We assign the container name to a variable then shift it from the array of params.
container=$1
shift;
runexec=$1
shift;

docker_compose="docker-compose -f $script_dirname/../docker-compose.yml $runexec"
command="$docker_compose $container /bin/bash -c 'cd /var/www$relative_path && $@'"

# Only show a screen message if the output is stdout.
if [ -t 1 ]; then
  echo -e "SENDING \e[32m$command\e[0m TO \"$container\" container."
fi

eval "$command"
